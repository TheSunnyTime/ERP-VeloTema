{% extends "admin/change_form.html" %}
{% load i18n admin_urls %}

{% block object-tools %}
    {# Скрытое поле для статуса заказа — нужно для js! #}
    {% if original %}
        <input type="hidden" id="order-status-marker" value="{{ original.status }}">
    {% endif %}

    {# Сначала стандартные инструменты объекта (кнопки Сохранить и т.д.) #}
    {{ block.super }}

    {# Затем добавляем наши кнопки для документов #}
    {% if available_document_templates %}
        <div style="margin-top: 15px; padding-top: 10px; border-top: 1px solid var(--hairline-color);">
            <h4 style="margin-bottom: 5px;">{% translate "Сформировать документ:" %}</h4>
            <ul class="object-tools">
                {% for template in available_document_templates %}
                    <li>
                        <a href="{% url 'utils:generate_document' template.id current_object_id %}" 
                           class="button" 
                           target="_blank">
                            {{ template.name }}
                        </a>
                    </li>
                {% endfor %}
            </ul>
        </div>
    {% endif %}
{% endblock %}